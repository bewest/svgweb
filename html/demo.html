<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
</head>
<body><h1 style="margin:2px">Welcome to the SVGViewer Demo!
          <a href='http://code.google.com/p/sgweb'
             style="font-size: 10pt"
           >SVG rendering for common web browsers using flash.</a></h1>
    <label>Select SVG:
    </label>
    <select id="selectSVG" onClick="showSVG();" >
        <option value="scim">scimitar
        <option value="tiger">tiger
        <option value="spcar">sporty car - nice
        <option value="techcar">techy car - nice
        <option value="cam">camera
        <option value="ford">ford
        <option value="pg13">ratedpg13 - be patient
        <option value="eggs">eggs
        <option value="grapes">grapes
        <option value="metal">metal
        <option value="pres">presentation
        <option value="ufo">ufo
        <option value="acar">antique car
    </select>
    <p id='selectModeP'><span>Select Display Mode:</span>
    <select id="selectMode" onClick="setMode(this.selectedIndex);">
        <option value="image">image
        <option value="xml">xml (svgviewer only)
    </select>
    </p>
    <p><span>Select Renderer:</span>
    <select id="selectRenderer" onClick="if (this.selectedIndex != currentSVGRenderer) showSVG(true);">
        <option value="image">rendered by flash
        <option value="native">browser native svg
    </select>
    </p>
    <p>
    <span>viewBox:</span>
    <input id='inputViewBox' type="text" value=""/>
    <input type="button" onClick="setViewBox();" value="set" style="margin-right:10px"/>
    <input type="button" onClick="modVB(function(vb) {vb[0]=parseFloat(vb[0])+25.0;});" value="<"/>
    <input type="button" onClick="modVB(function(vb) {vb[0]=parseFloat(vb[0])-25.0;});" value=">"/>
    <input type="button" onClick="modVB(function(vb) {vb[1]=parseFloat(vb[1])+25.0;});" value="^"/>
    <input type="button" onClick="modVB(function(vb) {vb[1]=parseFloat(vb[1])-25.0;});" value="V"/>
    <input type="button" onClick="modVB(function(vb) {vb[2]=parseFloat(vb[2])/1.1;vb[3]=parseFloat(vb[3])/1.1;});" value="+"/>
    <input type="button" onClick="modVB(function(vb) {vb[2]=parseFloat(vb[2])*1.1;vb[3]=parseFloat(vb[3])*1.1;});" value="-"/>
    </p>
    <p><div id='mySVGDiv' style='display:block;float:left;'><!--SVG will go here --></div></p>
    <pre id='myXMLp' width="100%" style='clear:left;'></pre>

    <script src='svgviewer.js' type='text/javascript'></script>
    <script type='text/javascript'>
    var currentSVGIndex = -1;
    var currentSVGHandler;
    var SVGFiles= [
                    { svgURL: "scimitar.svg", width:466,height:265 },
                    { svgURL: "tiger.svg", width:800,height:800 },
                    { svgURL: "car.svg", width:900,height:600 },
                    { svgURL: "gallardo.svg", viewBox:'0 0 3800 1800',width:1000,height:600 },
                    { svgURL: "AJ_Digital_Camera.svg", width:406,height:206 },
                    { svgURL: "compuserver_msn_Ford_Focus.svg", width:548,height:303 },
                    { svgURL: "juanmontoya_lingerie.svg", width:858,height:1074 },
                    { svgURL: "rg1024_eggs.svg", width:430,height:474 },
                    { svgURL: "rg1024_green_grapes.svg", width:558,height:781 },
                    { svgURL: "rg1024_metal_effect.svg", width:445,height:479 },
                    { svgURL: "rg1024_Presentation_with_girl.svg", width:305,height:398 },
                    { svgURL: "rg1024_Ufo_in_metalic_style.svg", width:729,height:379 },
                    { svgURL: "tommek_Car.svg", width:1052,height:744 }
                  ];
    function setMode(mode) {
        if (mode == 0) {
            document.getElementById('mySVGDiv').style.display='';
            document.getElementById('myXMLp').style.display='none';
        }
        if (mode == 1) {
            if (document.getElementById('mySVGDiv').style.display != 'none') {
                showXML(currentSVGHandler.getXML());
            }
        }
    }
    function showXML(newXMLString) {
        var newline=svgviewer.inBrowserString("MSIE") ? '\r\n' : '\n';
        newXMLString = newXMLString.split(/\r\n/g).join(newline);
        newXMLString = newXMLString.split(/\n|\r/g).join(newline);
        var xmlText = document.createTextNode(newXMLString);
        var myP = document.getElementById('myXMLp');
        if (myP.childNodes[0]) {
            myP.removeChild(myP.childNodes[0]);
        }
        document.getElementById('myXMLp').appendChild(xmlText);
        document.getElementById('mySVGDiv').style.display='none';
        document.getElementById('myXMLp').style.display='';
    }
    function svgOnLoad(msg) {
        if (SVGFiles[currentSVGIndex].viewBox) {
            currentSVGHandler.getSVGDocument().documentElement.setAttribute('viewBox', SVGFiles[currentSVGIndex].viewBox);
            document.getElementById('inputViewBox').value = SVGFiles[currentSVGIndex].viewBox;
        }
        else {
            window.modVB(function(vb){});
        }
    }

    function showSVG(force) {
        var svgIndex=document.getElementById('selectSVG').selectedIndex;
        var svgParentNode=document.getElementById('mySVGDiv');
        if (currentSVGIndex != svgIndex || force) {
            var newSVG = SVGFiles[svgIndex];
            var params = { uniqueId: 'foo' + Math.floor(1000000*Math.random()), bgcolor:'#ffffff',
                           parentId: 'mySVGDiv', sourceType: "url_svg", debug:true, onLoad:svgOnLoad } 
            for (var prop in newSVG) {
                params[prop]=newSVG[prop];
            }
            var renderer = (document.getElementById('selectRenderer').selectedIndex == 0) ? 'svgviewer' : 'native';
            params['renderer']=renderer;
            while (svgParentNode.childNodes[0]) {
                svgParentNode.removeChild(svgParentNode.childNodes[0]);
            }
            currentSVGHandler= svgviewer.createSVG(params);
            currentSVGIndex = svgIndex;
            currentSVGRenderer = document.getElementById('selectRenderer').selectedIndex;
            svgParentNode.style.display='';
            document.getElementById('myXMLp').style.display='none';
            document.getElementById('selectMode').selectedIndex=0;
            if (renderer == 'svgviewer') {
                document.getElementById('selectMode').removeAttribute('disabled');
            }
            else {
                document.getElementById('selectMode').disabled='true';
            }
            document.getElementById('selectSVG').blur();
        }
    }

    function modVB(modfunc) {
        var viewBox = currentSVGHandler.getSVGDocument().documentElement.getAttribute('viewBox');
        if (typeof(viewBox) != "string" || !viewBox.match(/\s*\S+\s*\S+\s*\S+\s*\S+\s*/)) {
            viewBox = "0 0 " + Math.round(currentSVGHandler.width) + ' ' + Math.round(currentSVGHandler.height);
        }
        viewBox=viewBox.replace(/^\s+/, '');
        var vbvals = viewBox.split(/\s+/);
        modfunc(vbvals);
        viewBox = Math.round(vbvals[0]) + ' ' + Math.round(vbvals[1]) + ' ' + 
                  Math.round(vbvals[2]) + ' ' + Math.round(vbvals[3]);
        currentSVGHandler.getSVGDocument().rootElement.setAttribute('viewBox',viewBox);
        document.getElementById('inputViewBox').value = viewBox;
    }
    function setViewBox() {
        var viewBox = document.getElementById('inputViewBox').value;
        currentSVGHandler.getSVGDocument().documentElement.setAttribute('viewBox', viewBox);
    }
    showSVG(true);
    if (svgviewer.inBrowserString('MSIE')) {
        document.getElementById('selectRenderer').disabled='true';
    }
    </script>
</body>
</html>
